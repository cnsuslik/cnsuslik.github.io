<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>散触老黄历Ver2.22</title>
    <link rel="shortcut icon" type="image/x-icon" href="favicon.ico?" />
    <script src="//code.jquery.com/jquery-3.6.0.min.js"></script>
    <script type="text/javascript">
      //
      // 标签页心跳
      setInterval(function () {
        fetch("/heartbeat", { method: "POST" });
      }, 60000);

      /*
       * 注意：本程序中的“随机”都是伪随机概念，以当前的天为种子。
       */
      function random(dayseed, indexseed) {
        var n = dayseed % 11117;
        for (var i = 0; i < 100 + indexseed; i++) {
          n = n * n;
          n = n % 11117; // 11117 是个质数
        }
        return n;
      }

      var today = new Date();
      var iday =
        today.getFullYear() * 10000 +
        (today.getMonth() + 1) * 100 +
        today.getDate();

      const maintainday = 20250812;

      var weeks = ["日", "一", "二", "三", "四", "五", "六"];
      var directions = [
        "北方",
        "东北方",
        "东方",
        "东南方",
        "南方",
        "西南方",
        "西方",
        "西北方",
        "地板",
        "天花板",
      ];
      var bbq = [
        "边郊镇",
        "边郊镇",
        "边郊镇",
        "边郊镇",
        "亚斯拉尼站",
        "亚斯拉尼站",
        "亚斯拉尼站",
        "亚斯拉尼站",
        "雷转质矿场",
        "雷转质矿场",
        "雷转质矿场",
        "雷转质矿场",
        "亚斯拉尼荒野东部",
        "旧亚历山德里亚",
        "永护塔外围",
        "台夏帕尼废村",
        "落雷场",
        "尤派光晕农地",
      ];
      var vme50 = [
        {
          name: "吃KFC",
          good: "疯狂星期四V我50！",
          bad: "点个KFC的工夫错过两只大S",
        },
        {
          name: "请群友吃疯狂星期四",
          good: "积攒人品有利于触发",
          bad: "群友卷走你的钱跑了",
        },
        {
          name: "吃麦当劳",
          good: "用叛逆的方式度过疯四",
          bad: "谁叫你叛变疯四的！",
        },
      ];
      var activities = [
        {
          name: "单农300",
          good: "成为299巨大遗产继承人！",
          bad: "农了1800都没气",
          weekend: true,
          d1: false,
        },
        {
          name: "过饱和式农怪",
          good: "好耶，才补两只就出了",
          bad: "又补了300，怎么还没气",
          weekend: true,
          d1: false,
        },
        {
          name: "合农",
          good: "分工合作，干活不累",
          bad: "队友觉得是你把S吓跑了",
          weekend: true,
          d1: true,
        },
        {
          name: "排点",
          good: "一路顺畅光速下班",
          bad: "追杀花篮四小时也没排完",
          weekend: true,
          d1: true,
        },
        {
          name: "守床位",
          good: "睡下的时候风平浪静，起来的时候刚好出货",
          bad: "镇压王就是你",
          weekend: true,
          d1: false,
        },
        {
          name: "丢%v",
          good: "随手一丢就出货",
          bad: "舍弃了幻梦武器箱",
          weekend: true,
          d1: false,
        },
        {
          name: "农%t",
          good: "海量遗产等你来领",
          bad: "你就是遗产",
          weekend: true,
          d1: false,
        },
        {
          name: "喂水蛭",
          good: "一发口锥见图图",
          bad: "你被冰海天使打倒了",
          weekend: true,
          d1: false,
        },
        {
          name: "农南萨",
          good: "今天的南萨地图格外清爽",
          bad: "噔噔咚，沙漠皇帝失败！",
          weekend: true,
          d1: true,
        },
        {
          name: "组织芒批",
          good: "光明芒批头子就是你！",
          bad: "一路暗黑全寄",
          weekend: true,
          d1: false,
        },
        {
          name: "采棉花",
          good: "成功吃到路人遗产",
          bad: "加油啊，采棉花的大哥哥们",
          weekend: true,
          d1: false,
        },
        {
          name: "挖刚子",
          good: "刚好就差你这一轮",
          bad: "单挖10个窗口都没动静",
          weekend: true,
          d1: false,
        },
        {
          name: "挖护土",
          good: "一镐下去就出货",
          bad: "路人豆芽随便一挖就出",
          weekend: true,
          d1: false,
        },
        {
          name: "挖牛牛",
          good: "第一发就出气",
          bad: "都挖了三轮了，真的不是丢了吗",
          weekend: true,
          d1: false,
        },
        {
          name: "挖G7",
          good: "单图龙低，开图苍白！",
          bad: "花呗借款也触不出苍白骑士",
          weekend: true,
          d1: false,
        },
        {
          name: "触阿格里帕",
          good: "一发摩杜纳，开图出气！",
          bad: "诗学图没了，不会要挖G5吧……",
          weekend: true,
          d1: false,
        },
        {
          name: "站岗伽洛克",
          good: "成功接生早产jlk",
          bad: "站到强制发现丢了！",
          weekend: true,
          d1: true,
        },
        {
          name: "钓%l",
          good: "刚坐下就是鱼王竿",
          bad: "半天不舔，舔了不起，起了没气",
          weekend: true,
          d1: false,
        },
        {
          name: "坐鸟车",
          good: "爬爬算什么概率S，直接一发入魂",
          bad: "鸟房：嘿嘿，赚麻了",
          weekend: true,
          d1: false,
        },
        {
          name: "蹲龙蛋",
          good: "使用龙蛋计数器，轻松五连无压力",
          bad: "为什么！为什么又是铁王八！",
          weekend: true,
          d1: false,
        },
        {
          name: "炸多智兽",
          good: "一炸一个准",
          bad: "装备耐久度降为0……",
          weekend: true,
          d1: false,
        },
        {
          name: "炸阿姆斯特朗",
          good: "一炸一个准",
          bad: "装备耐久度降为0……",
          weekend: true,
          d1: false,
        },
        {
          name: "触萨法特",
          good: "吉田概率学不存在",
          bad: "吉田概率学魅力时刻",
          weekend: true,
          d1: false,
        },
        {
          name: "蹲饮火魔",
          good: "蹲到了低进度报恩山",
          bad: "喜报：山谢亚强制了",
          weekend: true,
          d1: false,
        },
        {
          name: "搓牛排",
          good: "牛排仙人就是你",
          bad: "不知不觉又搓满一组999",
          weekend: true,
          d1: false,
        },
        {
          name: "吹雪",
          good: "嘀嘀嘀，现在为你播送天气预报！",
          bad: "雪是喷到强制的，气是一点都没的",
          weekend: true,
          d1: false,
        },
        {
          name: "触理符S",
          good: "单抽一发入魂！",
          bad: "受理额度不足……",
          weekend: true,
          d1: false,
        },
        {
          name: "触小S",
          good: "你就是今天的小S守护神！",
          bad: "怎么小S都不出货？",
          weekend: true,
          d1: true,
        },
        {
          name: "触5S",
          good: "你就是今天的诺弗兰特守护神",
          bad: "笑死，根本不出货",
          weekend: true,
          d1: false,
        },
        {
          name: "触6S",
          good: "你就是今天的晓月守护神",
          bad: "笑死，根本不出货",
          weekend: true,
          d1: false,
        },
        {
          name: "触7S",
          good: "一个人触了一波7S连车",
          bad: "笑死，根本不出货",
          weekend: true,
          d1: false,
        },
        {
          name: "触石板",
          good: "刚来就有石人英雄",
          bad: "等到天荒地老都只有霸道归来者",
          weekend: true,
          d1: false,
        },
        {
          name: "和斯奎克约会",
          good: "拒绝动物表演！",
          bad: "路人豆芽不知什么时候把你skk打了",
          weekend: true,
          d1: false,
        },
        {
          name: "低进度梭哈",
          good: "什么叫高触！",
          bad: "还是不要追梦了吧",
          weekend: true,
          d1: true,
        },
        {
          name: "中等进度赌脸",
          good: "40%值得一试",
          bad: "正态分布什么的都是骗人的",
          weekend: true,
          d1: true,
        },
        {
          name: "高进度会诊",
          good: "来的时候S刚好回家",
          bad: "警惕高进度栽种！",
          weekend: true,
          d1: true,
        },
        {
          name: "跟A车",
          good: "一趟下来结束刚好出S",
          bad: "路上错过三只大S",
          weekend: true,
          d1: true,
        },
        {
          name: "巡全服",
          good: "你的英名远播八服",
          bad: "前脚刚走，后脚别人就出了",
          weekend: true,
          d1: true,
        },
        {
          name: "守本服",
          good: "你就是今天的老家守护神",
          bad: "今天老家的S都是栽种",
          weekend: true,
          d1: true,
        },
        {
          name: "死磕单个S",
          good: "坚持到底终将胜利！",
          bad: "头铁是没有好结果的",
          weekend: true,
          d1: true,
        },
        {
          name: "冒领ET",
          good: "路人纷纷称赞你高超的数学水平",
          bad: "因为算错时间被路人出警了",
          weekend: true,
          d1: true,
        },
        {
          name: "刷小巨魔",
          good: "第一把就掉宠物了",
          bad: "刷了二十次也没见到宠物",
          weekend: true,
          d1: true,
        },
        {
          name: "和畜畜对线",
          good: "路人们纷纷对你表示支持",
          bad: "路人把你挂上了贴吧",
          weekend: true,
          d1: true,
        },
        {
          name: "早起",
          good: "一早起来就是S车",
          bad: "迷迷糊糊跑错服务器了",
          weekend: true,
          d1: false,
        },
        {
          name: "午睡",
          good: "一觉醒来，风平浪静，什么也没错过",
          bad: "一觉醒来，错过十几个S……",
          weekend: true,
          d1: false,
        },
        {
          name: "晚睡",
          good: "睡前连车！",
          bad: "再触一个就睡……然后不知不觉天亮了",
          weekend: true,
          d1: true,
        },
        {
          name: "等开怪时贪双色",
          good: "血赚72",
          bad: "贪着贪着错过了开怪……",
          weekend: true,
          d1: false,
        },
        {
          name: "等开怪时搓生产",
          good: "时间管理大师",
          bad: "路人玩怪把你雾绢炸了",
          weekend: true,
          d1: false,
        },
        {
          name: "等开怪时蹲饮火魔",
          good: "救完火直接给大伙加餐！",
          bad: "饮火魔没蹲到，还忘记时间没摸到S",
          weekend: true,
          d1: false,
        },
        {
          name: "触中萨",
          good: "随便找了个点一试就是大眼",
          bad: "水煮蛋吃噎了也不见大眼",
          weekend: true,
          d1: false,
        },
        {
          name: "触完就跑",
          good: "事了拂衣去，深藏功与名",
          bad: "你的S被路人私闷了",
          weekend: true,
          d1: true,
        },
        {
          name: "晨练",
          good: "一大早哐哐农出S车",
          bad: "没睡醒，农完才发现农错服了！",
          weekend: true,
          d1: false,
        },
        {
          name: "开鱼眼钓审判鳐",
          good: "鱼眼战神就是你！",
          bad: "好不容易起了也还是没气",
          weekend: true,
          d1: false,
        },
        {
          name: "边刷剧边农怪",
          good: "充分利用时间，农怪不无聊",
          bad: " 一不留神农错服了",
          weekend: true,
          d1: false,
        },
        {
          name: "边听歌边农怪",
          good: "专属BGM大幅提升效率",
          bad: "一个分心农错服了",
          weekend: true,
          d1: false,
        },
        {
          name: "触特殊FATE",
          good: "触FATE也是触！",
          bad: "打半天前置没动静，怎么看都是丢了吧！",
          weekend: true,
          d1: true,
        },
        {
          name: "触幻海流",
          good: "触幻海流也是触！",
          bad: "S没气就算了，怎么幻海流也触不出来！",
          weekend: true,
          d1: true,
        },
        {
          name: "挖G17",
          good: "一个S都没错过，还出了武器箱",
          bad: "错过一堆S，武器箱也不出，这辈子就毁在的狞上了",
          weekend: true,
          d1: true,
        },
        {
          name: "翘班吃S",
          good: "你的领导今天也翘班打游戏",
          bad: "HR：明天去财务那结下工资",
          weekend: false,
          d1: true,
        },
        {
          name: "请假吃S",
          good: "一天下来吃了不少，这假请得真值",
          bad: "你装病请假被领导发现了",
          weekend: false,
          d1: true,
        },
        {
          name: "边上班边吃S",
          good: "上班就是为了摸鱼！",
          bad: "摸鱼被领导发现了",
          weekend: false,
          d1: true,
        },
        {
          name: "边上班边农怪",
          good: "农批永远不受时间地点限制！",
          bad: "农怪导致你的工作出现重大纰漏",
          weekend: false,
          d1: false,
        },
        {
          name: "翘专业课吃S",
          good: "今天的专业课比狩猎还水",
          bad: "室友回来告诉你今天有点名",
          weekend: false,
          d1: true,
        },
        {
          name: "通勤时手机远程吃S",
          good: "没有人能阻止猎批！",
          bad: "因为信号太差，你脸开了",
          weekend: false,
          d1: true,
        },
        {
          name: "边写论文边狩猎",
          good: "狩猎给你的论文带来了不少灵感",
          bad: "导师：你怎么废话连篇还一堆错别字！",
          weekend: false,
          d1: true,
        },
        {
          name: "边复习边狩猎",
          good: "据说狩猎有助于大脑开发提高学习效率",
          bad: "笔记一条都没记住，这辈子毁在狩猎上了",
          weekend: false,
          d1: true,
        },
        {
          name: "专心赶DDL",
          good: "一天下来竟没错过一个大S",
          bad: "交完稿发现今天错过一堆S车",
          weekend: false,
          d1: true,
        },
        {
          name: "招募版吃瓜",
          good: "前排瓜子板凳小零食——",
          bad: "沉迷吃瓜错过一堆S，而且瓜还烂尾了！",
          weekend: true,
          d1: true,
        },
        {
          name: "做数学题",
          good: "没人再说你算错ET了",
          bad: "二七不是四十八么？散触数学不好是有原因的……",
          weekend: true,
          d1: true,
        },
        {
          name: "和猎批玩你画我猜",
          good: "新的群头像诞生了！",
          bad: "这就是你偷懒不去农怪的理由？",
          weekend: true,
          d1: true,
        },
        {
          name: "玩怪猎",
          good: "在哪猎不是猎！",
          bad: "你因为输出太菜被别的猎批群嘲了",
          weekend: true,
          d1: true,
        },
        {
          name: "拉豆芽入坑S怪狩猎",
          good: "豆芽成为一颗猎批界冉冉升起的新星！",
          bad: "豆芽被一群猎批吓傻了，从此再也没来找你玩",
          weekend: true,
          d1: true,
        },
      ];

      var specials = [
        {
          date: 20250511,
          type: "good",
          name: "跟车羊驼山",
          description: "嘟嘟嘟，羊驼山观光车！",
        },
        {
          date: 20250501,
          type: "good",
          name: "熬大夜跟车羊驼山",
          description: "你见过凌晨4点的羊驼山吗？",
        },
        {
          date: maintainday,
          type: "good",
          name: "维护前冲刺巡逻",
          description: "死亡冲锋！！",
        },
        {
          date: maintainday,
          type: "good",
          name: "维护时和猎批玩你画我猜",
          description: "新的群头像和表情包有了",
        },
        {
          date: maintainday,
          type: "good",
          name: "开服后找A怪",
          description: "精准推算服务器重启时间！",
        },
        {
          date: maintainday + 1,
          type: "good",
          name: "蹲守南迪",
          description: "没事可做就蹲蹲南迪吧！",
        },
        {
          date: maintainday + 2,
          type: "good",
          name: "测试连锁",
          description: "发现了新的稳定连锁",
        },
        {
          date: maintainday + 3,
          type: "good",
          name: "测试连锁",
          description: "发现了新的稳定连锁",
        },
        {
          date: 20250531,
          type: "good",
          name: "吃粽子",
          description: "你们端午都有什么习俗？不会还是吃饺子吧！",
        },
        {
          date: 20250621,
          type: "good",
          name: "做绿豆汤",
          description: "你们夏至都有什么习俗？不会还是吃饺子吧！",
        },
        {
          date: 20250829,
          type: "good",
          name: "和CP出门约会",
          description: "你们七夕都有什么习俗？不会还是吃饺子吧！",
        },
        {
          date: 20250906,
          type: "good",
          name: "放河灯",
          description: "你们中元节都有什么习俗？不会还是吃饺子吧！",
        },
        {
          date: 20251006,
          type: "good",
          name: "吃月饼",
          description: "你们中秋节都有什么习俗？不会还是吃饺子吧！",
        },
        {
          date: 20251006,
          type: "good",
          name: "农月球",
          description: "别人赏月，你登月",
        },
        {
          date: 20251127,
          type: "good",
          name: "烤火鸡",
          description: "不会感恩节也还是吃饺子吧！",
        },
        {
          date: 20251221,
          type: "good",
          name: "吃饺子",
          description: "你们冬至都有什么习俗？喝羊肉汤也不错！",
        },
        {
          date: 101,
          type: "good",
          name: "抢红包",
          description: "新年新气象！",
        },
        {
          date: 107,
          type: "good",
          name: "做算术题",
          description: "谁说散触数学不好！一七得七二七四十八……",
        },
        {
          date: 202,
          type: "good",
          name: "扎双马尾",
          description: "今天是双马尾日！",
        },
        {
          date: 214,
          type: "good",
          name: "和CP出门约会",
          description: "狩猎哪有对象重要",
        },
        {
          date: 312,
          type: "bad",
          name: "农边区",
          description: "植树节禁止乱砍滥伐！",
        },
        {
          date: 501,
          type: "good",
          name: "农怪",
          description: "劳动最光荣！",
        },
        {
          date: 520,
          type: "good",
          name: "表白",
          description: "真的吗？",
        },
        {
          date: 601,
          type: "bad",
          name: "装嫩",
          description: "儿童节不是给你过的啊喂！",
        },
        {
          date: 618,
          type: "good",
          name: "逛商城",
          description: "趁着折扣多买点时装",
        },
        {
          date: 714,
          type: "good",
          name: "红色电音极地大冲击",
          description: "来势汹汹的传思电音，天地人间完全放电！",
        },
        {
          date: 715,
          type: "good",
          name: "红色电音极地大冲击",
          description: "来势汹汹的传思电音，天地人间完全放电！",
        },
        {
          date: 910,
          type: "good",
          name: "收豆芽",
          description: "教师节快乐！",
        },
        {
          date: 1001,
          type: "good",
          name: "出门度假",
          description: "国庆快乐！",
        },
        {
          date: 1031,
          type: "good",
          name: "吃南瓜",
          description: "守护天节快乐！别忘了做季节活动！",
        },
        {
          date: 1111,
          type: "good",
          name: "逛商城",
          description: "趁着折扣多买点时装",
        },
        {
          date: 1212,
          type: "good",
          name: "逛商城",
          description: "趁着折扣多买点时装",
        },
        {
          date: 1224,
          type: "good",
          name: "给好友送礼物",
          description: "星芒节快乐！别忘了做季节活动！",
        },
        {
          date: 1225,
          type: "good",
          name: "给好友送礼物",
          description: "星芒节快乐！别忘了做季节活动！",
        },
        {
          date: 1231,
          type: "good",
          name: "参加跨年派对",
          description: "不要学隔壁大哥哥，跨年夜还在触S",
        },
      ];

      var tools = ["萨岛", "月球", "大森", "鳐子", "边区", "魔大陆", "北萨"];

      var varNames = ["鸡胸肉", "鱼粉", "鸟蛋", "垃圾"];

      var fish = ["铜镜", "审判鳐"];

      var aprilfool = [
        {
          name: "诸事",
          good: "诸事不寄，放手去干！",
          bad: "诸事不宜，小心翻车！",
        },
        {
          name: "向群友表白",
          good: "我……我也喜欢你！",
          bad: "你被移出了群聊",
        },
        {
          name: "开愚人节玩笑",
          good: "节日就该做该在节日做的事！",
          bad: "就算是开玩笑也不要开太过分啊喂！",
        },
        {
          name: "使用老黄历",
          good: "你被骗了，快输入名字获取真实结果吧！",
          bad: "你被骗了，快输入名字获取真实结果吧！",
        },
      ];

      var drinks = [
        "机工士",
        "机工士",
        "机工士",
        "机工士",
        "机工士",
        "机工士",
        "机工士",
        "机工士",
        "机工士",
        "机工士",
        "机工士",
        "机工士",
        "机工士",
        "机工士",
        "机工士",
        "召唤师",
        "召唤师",
        "召唤师",
        "召唤师",
        "召唤师",
        "召唤师",
        "召唤师",
        "召唤师",
        "召唤师",
        "召唤师",
        "召唤师",
        "召唤师",
        "召唤师",
        "召唤师",
        "召唤师",
        "绘灵法师",
        "绘灵法师",
        "绘灵法师",
        "绘灵法师",
        "绘灵法师",
        "绘灵法师",
        "绘灵法师",
        "绘灵法师",
        "绘灵法师",
        "绘灵法师",
        "绘灵法师",
        "绘灵法师",
        "绘灵法师",
        "绘灵法师",
        "绘灵法师",
        "战士",
        "暗黑骑士",
        "骑士",
        "绝枪战士",
        "白魔法师",
        "占星术士",
        "学者",
        "贤者",
        "武僧",
        "武士",
        "龙骑士",
        "钐镰客",
        "忍者",
        "蝰蛇剑士",
        "吟游诗人",
        "舞者",
        "青魔法师",
        "赤魔法师",
        "黑魔法师",
      ];

      var titles = [
        "人形凶兽",
        "凶猛异常",
        "拾穗机",
        "锐锋",
        "鲜羽精兵",
        "死亡从天而降",
        "兴奋猎手",
        "刺激猎手",
        "狩猎新星",
        "狩猎行家",
        "狩猎大师",
        "极限狩猎",
        "无尽狩猎",
        "恶名精英猎手",
      ];

      function is_someday() {
        return (
          iday % 10000 == 512 || iday % 10000 == 1213 || iday % 10000 == 918
        );
      }

      function getTodayString() {
        var datetext =
          "今天是" +
          today.getFullYear() +
          "年" +
          (today.getMonth() + 1) +
          "月" +
          today.getDate() +
          "日 星期" +
          weeks[today.getDay()];
        // 特殊纪念日期添加文本
        if (iday % 10000 == 512) {
          datetext = datetext + "<br>一方有难，八方支援<br>—";
        }
        if (iday % 10000 == 918 || iday % 10000 == 1213) {
          datetext = datetext + "<br>铭记历史，勿忘国耻<br>—";
        }
        return datetext;
      }

      function star(num) {
        // 手动调整低星和高星概率，实际星数为n
        var p = [1, 1, 2, 2, 2, 3, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 6];
        var n = p[num - 1];

        var luck = [
          " 别触了，安心等吃吧",
          " 浅触辄止，多触伤身",
          " 只要多触，总会有的",
          " 触S如家常便饭",
          " 高触就是你？",
          " 群友都问你触发挂哪来的",
        ];
        var result = "";
        var i = 0;
        while (i < n) {
          result += "★";
          i++;
        }
        while (i < 5) {
          result += "☆";
          i++;
        }
        result += luck[n - 1];
        return result;
      }

      // 生成今日运势
      function pickTodaysLuck() {
        //愚人节限定首页
        if (iday % 10000 == 401) {
          for (var i = 0; i < aprilfool.length; i++) {
            addToGood(aprilfool[i]);
          }
          for (var i = 0; i < aprilfool.length; i++) {
            addToBad(aprilfool[i]);
          }
          $(".goddes_value").html("☆☆☆☆☆ 哪来的究极倒霉蛋！");
          $(".direction_value").html("散触老黄历");
          $(".bbq_value").html("利姆萨·罗敏萨下层甲板");
          $(".drink_value").html("烹调师");
          return;
        }

        var _activities = filter(activities);

        var numGood = (random(iday, 98) % 3) + 2;
        var numBad = (random(iday, 87) % 3) + 2;
        var eventArr = pickRandomActivity(_activities, numGood + numBad, 0);

        var specialSize = pickSpecials();

        for (var i = 0; i < numGood; i++) {
          addToGood(eventArr[i]);
        }

        for (var i = 0; i < numBad; i++) {
          if (
            iday == maintainday &&
            eventArr[numGood + i].name == "和猎批玩你画我猜"
          ) {
            continue;
            // 维护日冲突事件直接跳过
          }
          if (
            iday == maintainday + 1 &&
            eventArr[numGood + i].name == "跟A车"
          ) {
            addToGood(eventArr[numGood + i]);
            continue;
            // 维护后Day1的A车强制转为宜
          }
          addToBad(eventArr[numGood + i]);
        }
      }

      // 根据输入内容重新生成
      function rePick(num) {
        var _activities = filter(activities);

        var numGood = (random(iday + num, 98) % 3) + 2;
        var numBad = (random(iday + num, 87) % 3) + 2;
        var eventArr = pickRandomActivity(_activities, numGood + numBad, num);

        //重置事件
        $(".good .content ul").html("");
        $(".bad .content ul").html("");

        var specialSize = pickSpecials();

        for (var i = 0; i < numGood; i++) {
          addToGood(eventArr[i]);
        }

        for (var i = 0; i < numBad; i++) {
          if (
            iday == maintainday &&
            eventArr[numGood + i].name == "和猎批玩你画我猜"
          ) {
            continue;
            // 维护日冲突事件直接跳过
          }
          if (
            iday == maintainday + 1 &&
            eventArr[numGood + i].name == "跟A车"
          ) {
            addToGood(eventArr[numGood + i]);
            continue;
            // 维护后Day1的A车强制转为宜
          }
          addToBad(eventArr[numGood + i]);
        }
      }

      // 去掉一些不合今日的事件

      function filter(activities) {
        var result = [];

        // 维护日首日事件过滤
        if (iday == maintainday + 1) {
          for (var i = 0; i < activities.length; i++) {
            if (activities[i].d1) {
              result.push(activities[i]);
            }
          }
          return result;
        }

        // 周末的话，只留下 weekend = true 的事件
        if (isWeekend()) {
          for (var i = 0; i < activities.length; i++) {
            if (activities[i].weekend) {
              result.push(activities[i]);
            }
          }
          return result;
        }

        // 添加疯狂星期四限定事件
        if (today.getDay() == 4) {
          for (var j = 0; j < vme50.length; j++) {
            result.push(vme50[j]);
          }
        }

        for (var i = 0; i < activities.length; i++) {
          result.push(activities[i]);
        }
        return result;
      }

      function isWeekend() {
        return today.getDay() == 0 || today.getDay() == 6;
      }

      // 添加预定义事件

      function pickSpecials() {
        var specialSize = [0, 0];

        for (var i = 0; i < specials.length; i++) {
          var special = specials[i];

          //节日判定
          if (iday % 10000 == special.date) {
            if (special.type == "good") {
              specialSize[0]++;
              addToGood({ name: special.name, good: special.description });
            } else {
              specialSize[1]++;
              addToBad({ name: special.name, bad: special.description });
            }
            continue;
          }

          if (iday == special.date) {
            if (special.type == "good") {
              specialSize[0]++;
              addToGood({ name: special.name, good: special.description });
            } else {
              specialSize[1]++;
              addToBad({ name: special.name, bad: special.description });
            }
          }
        }

        return specialSize;
      }

      // 从 activities 中随机挑选 size 个
      function pickRandomActivity(acts, size, num) {
        var picked_events = pickRandom(acts, size, num);

        for (var i = 0; i < picked_events.length; i++) {
          picked_events[i] = parse(picked_events[i], num);
        }

        return picked_events;
      }

      // 从数组中随机挑选 size 个
      function pickRandom(array, size, num) {
        var result = [];

        for (var i = 0; i < array.length; i++) {
          result.push(array[i]);
        }

        for (var j = 0; j < array.length - size; j++) {
          var index = random(iday + num, j) % result.length;
          result.splice(index, 1);
        }

        return result;
      }

      // 解析占位符并替换成随机内容
      function parse(event, num) {
        var result = { name: event.name, good: event.good, bad: event.bad }; // clone

        if (result.name.indexOf("%v") != -1) {
          result.name = result.name.replace(
            "%v",
            varNames[random(iday + num, 12) % varNames.length]
          );
        }

        if (result.name.indexOf("%t") != -1) {
          var t = random(iday + num, 11) % tools.length;
          if (iday % 10000 == 312 && t == 4) t = 0; // 植树节的边区强制改为萨岛
          if (iday == 20251006 && t == 1) t = 2; // 中秋节的月球强制改为大森
          result.name = result.name.replace("%t", tools[t]);
        }

        if (result.name.indexOf("%l") != -1) {
          result.name = result.name.replace(
            "%l",
            fish[random(iday + num, 7) % fish.length]
          );
        }

        return result;
      }

      // 添加到“宜”
      function addToGood(event) {
        $(".good .content ul").append(
          '<li><div class="name">' +
            event.name +
            '</div><div class="description">' +
            event.good +
            "</div></li>"
        );
      }

      // 添加到“不宜”
      function addToBad(event) {
        $(".bad .content ul").append(
          '<li><div class="name">' +
            event.name +
            '</div><div class="description">' +
            event.bad +
            "</div></li>"
        );
      }

      $(function () {
        // 特殊日期处理
        if (is_someday()) {
          document.body.className = "someday";
        }
        $(".date").html(getTodayString());
        $(".direction_value").html(
          directions[random(iday, 7) % directions.length]
        );
        $(".bbq_value").html(bbq[random(iday, 11) % bbq.length]);
        $(".drink_value").html(drinks[random(iday, 31) % drinks.length]);
        $(".goddes_value").html(star((random(iday, 6) % 17) + 1));
        $(".title_value").html(titles[random(iday, 19) % titles.length]);
        pickTodaysLuck();
      });

      //每次输入名字都以日期种子+名字种子重新生成一次数据
      function generateNew() {
        var inputValue = document.getElementById("yourname").value;
        var number = 0;
        for (var i = 0; i < inputValue.length; i++) {
          number += inputValue.charCodeAt(i);
        }
        $(".direction_value").html(
          directions[random(iday + number, 7) % directions.length]
        );
        $(".bbq_value").html(bbq[random(iday + number, 11) % bbq.length]);
        $(".drink_value").html(
          drinks[random(iday + number, 31) % drinks.length]
        );
        $(".goddes_value").html(star((random(iday + number, 6) % 17) + 1));
        $(".title_value").html(
          titles[random(iday + number, 19) % titles.length]
        );
        rePick(number);
      }

      /* 龙蛋计时器相关 */

      const data = {
        niaoye: [
          "宇宙和音",
          "幻影群岛",
          "拉诺西亚",
          "晨曦王座",
          "沃仙曦染",
          "神意之地",
          "红玉海",
          "萌芽池",
        ],
        maoye: [
          "紫水栈桥",
          "静语庄园",
          "海猫茶屋",
          "柔风海湾",
          "琥珀原",
          "摩杜纳",
          "延夏",
        ],
        zhuye: [
          "白金幻象",
          "旅人栈桥",
          "拂晓之间",
          "龙巢神殿",
          "梦羽宝境",
          "潮风亭",
          "神拳痕",
          "白银乡",
        ],
        gouye: ["水晶塔", "银泪湖", "太阳海岸", "伊修加德", "红茶川"],
      };

      // 龙蛋计时器核心功能
      function addRow() {
        const row = document.createElement("div");
        row.className = "row";

        // 计数器
        const counter = createCounter();

        // 服务器下拉列表
        const subSelect = document.createElement("select");
        subSelect.className = "worldSel";
        updateSubSelect(subSelect);

        // 上一个龙蛋的时间
        const timeDisplay = document.createElement("div");
        timeDisplay.className = "eggtime";

        // 记录按钮
        const recordBtn = document.createElement("button");
        recordBtn.className = "recbtn";
        recordBtn.textContent = "龙蛋";
        recordBtn.onclick = () => {
          const current = parseInt(counter.dataset.count) + 1;
          counter.dataset.count = current;
          counter.textContent = current;
          const now = new Date();
          timeDisplay.textContent = `上一次龙蛋：${now.getHours()}:${now
            .getMinutes()
            .toString()
            .padStart(2, "0")}`;
        };

        //删除按钮
        const delBtn = document.createElement("button");
        delBtn.textContent = "-";
        delBtn.className = "delebtn";
        delBtn.onclick = () => row.remove();

        // 铁王八功能组件
        const turtleBtn = document.createElement("button");
        turtleBtn.textContent = "铁王八";
        turtleBtn.className = "recbtn";
        const inputGroup = document.createElement("div");
        inputGroup.classList.add("hidden");
        inputGroup.style.gap = "5px";

        // 铁王八剩余时间输入框
        const timeInputGroup = document.createElement("div");
        timeInputGroup.className = "time-input-group";

        // 分钟输入框
        const minuteInput = document.createElement("input");
        minuteInput.type = "number";
        minuteInput.min = 0;
        minuteInput.placeholder = "分";
        minuteInput.className = "time-input";

        // 秒输入框
        const secondInput = document.createElement("input");
        secondInput.type = "number";
        secondInput.min = 0;
        secondInput.max = 59;
        secondInput.placeholder = "秒";
        secondInput.className = "time-input";

        const confirmBtn = document.createElement("button");
        confirmBtn.textContent = "确定";
        confirmBtn.className = "yesbtn";

        const cancelBtn = document.createElement("button");
        cancelBtn.textContent = "取消";
        cancelBtn.className = "nobtn";

        const cdDisplay = document.createElement("span");
        cdDisplay.className = "timer";
        cdDisplay.classList.add("hidden");

        timeInputGroup.append(
          minuteInput,
          ":",
          secondInput,
          confirmBtn,
          cancelBtn
        );
        inputGroup.appendChild(timeInputGroup);

        // 铁王八按钮点击事件
        turtleBtn.onclick = () => {
          recordBtn.classList.add("hidden");
          turtleBtn.classList.add("hidden");
          timeDisplay.classList.add("hidden");
          inputGroup.classList.remove("hidden");
        };

        // 取消按钮点击事件
        cancelBtn.onclick = () => {
          inputGroup.classList.add("hidden");
          recordBtn.classList.remove("hidden");
          turtleBtn.classList.remove("hidden");
          timeDisplay.classList.remove("hidden");
        };

        // 确定按钮点击事件
        confirmBtn.onclick = () => {
          // 获取并验证输入
          const minutes = parseInt(minuteInput.value) || 0;
          let seconds = parseInt(secondInput.value) || 0;

          // 处理秒数溢出
          if (seconds >= 60) {
            minutes += Math.floor(seconds / 60);
            seconds = seconds % 60;
          }

          const totalSeconds = minutes * 60 + seconds;
          if (totalSeconds <= 0) return;

          // 更新界面状态
          inputGroup.classList.add("hidden");
          cdDisplay.classList.remove("hidden");
          minuteInput.value = "";
          secondInput.value = "";

          // 显示倒计时
          cdDisplay.textContent = `-铁王八剩余${minutes}分${seconds
            .toString()
            .padStart(2, "0")}秒-`;

          // 启动倒计时
          startCountdown(totalSeconds, cdDisplay, () => {
            timeDisplay.classList.remove("hidden");
            recordBtn.classList.remove("hidden");
            turtleBtn.classList.remove("hidden");
            cdDisplay.classList.add("hidden");
          });
        };

        // 控制按钮组
        const controls = document.createElement("div");
        controls.className = "controls";
        controls.append(recordBtn, turtleBtn, delBtn);

        row.append(
          counter,
          subSelect,
          timeDisplay,
          inputGroup,
          cdDisplay,
          controls
        );
        egglist.appendChild(row);
      }

      // 创建计数器
      function createCounter() {
        const counter = document.createElement("div");
        counter.className = "counter";
        counter.textContent = "0";
        counter.dataset.count = 0;
        return counter;
      }

      function startCountdown(seconds, displayElement, callback) {
        let remaining = seconds;
        let audio = document.getElementById("alarmSound");

        displayElement.onclick = () => {
          clearInterval(timer);
          callback();
          return;
        };

        const timer = setInterval(() => {
          remaining--;
          const mins = Math.floor(remaining / 60);
          const secs = remaining % 60;
          displayElement.textContent = `-铁王八剩余${mins}分${secs
            .toString()
            .padStart(2, "0")}秒-`;

          if (remaining <= 0) {
            clearInterval(timer);
            audio.play();
            callback();
          }
        }, 1000);
      }

      // 更新所有子下拉选项
      function updateAllSub() {
        //console.log("updatedAll");
        var allSub = document.querySelectorAll("#egglist div select");
        for (let i = 0; i < allSub.length; i++) {
          updateSubSelect(allSub[i]);
        }
      }

      // 更新单个子下拉选项
      function updateSubSelect(SelectWorld) {
        //console.log("updateRow");
        const dc = document.getElementById("datacenter");
        const category = dc.value;
        SelectWorld.innerHTML = "";
        if (category) {
          data[category].forEach((item) => {
            const option = new Option(item, item);
            SelectWorld.add(option);
          });
        } else {
          const option = new Option("请先选择所在大区", "");
          option.disabled = true;
          SelectWorld.add(option);
        }
      }

      /* 农怪统寄小助手相关 */

      // 用于记录出货数和失败数
      var SuccCount = 0;
      var FailCount = 0;
      var Heritage = 0;

      var yards = [
        {
          label: "沉思之物",
          value: "300",
        },
        {
          label: "颇胝迦",
          value: "300",
        },
        {
          label: "伊休妲",
          value: "300",
        },
        {
          label: "优昙婆罗花",
          value: "200",
        },
        {
          label: "巨大鳐",
          value: "200",
        },
        {
          label: "卢克洛塔",
          value: "150",
        },
        {
          label: "蚓螈巨虫",
          value: "100",
        },
      ];

      // 更新失败数并推送
      function updateFail(num) {
        FailCount = FailCount + num;
        // 当所有计数被清空时折叠统计窗口
        if (FailCount == 0 && SuccCount == 0) {
          var resUpdate = document.getElementById("res");
          resUpdate.innerHTML = "";
          return;
        }
        const rate = (100 * SuccCount) / (FailCount + SuccCount);
        const rateformat = Math.round(rate * 100) / 100;
        const sgqk = Math.round(FailCount / 18) / 100;
        var resUpdate = document.getElementById("res");
        resUpdate.innerHTML =
          "<div class='restext'>当前总计出货 <span class='succnum'>" +
          SuccCount +
          "</span> 只怪，出货率 <span class='succnum'>" +
          rateformat +
          "%</span>，共吃到约 <span class='succnum'>" +
          Heritage +
          "</span> 只遗产</div><div class='restext2'>总共寄了 <span class='failnum'>" +
          FailCount +
          "</span> 只怪，约合 <span class='failnum'>" +
          sgqk +
          "</span> 个1800</div>";
      }

      // 更新成功数并推送
      function updateSucc(num, maxvalue) {
        // 农怪总数>农场容量时，超过部分自动并入失败统计
        if (Math.abs(num) > maxvalue) {
          SuccCount = SuccCount + maxvalue * Math.sign(num);
          FailCount = FailCount + num - maxvalue * Math.sign(num);
        } else {
          SuccCount = SuccCount + num;
          Heritage = Heritage + maxvalue * Math.sign(num) - num; //统计遗产
        }
        // 当所有计数被清空时折叠统计窗口
        if (FailCount == 0 && SuccCount == 0) {
          var resUpdate = document.getElementById("res");
          resUpdate.innerHTML = "";
          return;
        }
        const rate = (100 * SuccCount) / (FailCount + SuccCount);
        const rateformat = Math.round(rate * 100) / 100;
        const sgqk = Math.round(FailCount / 18) / 100;
        var resUpdate = document.getElementById("res");
        resUpdate.innerHTML =
          "<div class='restext'>当前总计出货 <span class='succnum'>" +
          SuccCount +
          "</span> 只怪，出货率 <span class='succnum'>" +
          rateformat +
          "%</span>，共吃到约 <span class='succnum'>" +
          Heritage +
          "</span> 只遗产</div><div class='restext2'>总共寄了 <span class='failnum'>" +
          FailCount +
          "</span> 只怪，约合 <span class='failnum'>" +
          sgqk +
          "</span> 个1800</div>";
      }

      function addFarmBad() {
        const farmrow = document.createElement("div");
        farmrow.className = "farmRow";

        // 好大一个寄
        const Failure = document.createElement("div");
        Failure.className = "failed";
        Failure.textContent = "寄";
        farmrow.appendChild(Failure);

        // 服务器下拉列表
        const subSelect = document.createElement("select");
        subSelect.className = "worldSelFarm";
        updateSubSelectFarm(subSelect);
        farmrow.appendChild(subSelect);

        // 农场选择列表
        const farmyardSelect = document.createElement("select");
        farmyardSelect.className = "farmSel";
        for (let i = 0; i < yards.length; i++) {
          let option = document.createElement("option");
          option.value = yards[i].value;
          option.textContent = yards[i].label;
          farmyardSelect.appendChild(option);
        }
        farmrow.appendChild(farmyardSelect);
        let currentSel = parseInt(farmyardSelect.value);
        updateFail(currentSel); // 新添加的记录先默认进行累加
        farmyardSelect.onchange = () => {
          let newSel = parseInt(farmyardSelect.value);
          updateFail(newSel - currentSel);
          currentSel = newSel;
        };

        const delBtn = document.createElement("button");
        delBtn.textContent = "-";
        delBtn.className = "delebtn";
        delBtn.onclick = () => {
          updateFail(0 - currentSel);
          farmrow.remove();
        };
        const controls = document.createElement("div");
        controls.className = "controls";
        controls.append(delBtn);

        farmrow.appendChild(controls);
        document.querySelector("#farmlist").appendChild(farmrow);
      }

      function addFarmGood() {
        const farmrow = document.createElement("div");
        farmrow.className = "farmRow";

        // 出货
        const success = document.createElement("div");
        success.className = "succeed";
        success.textContent = "出";
        farmrow.appendChild(success);

        // 服务器下拉列表
        const subSelect = document.createElement("select");
        subSelect.className = "worldSelFarm";
        updateSubSelectFarm(subSelect);
        farmrow.appendChild(subSelect);

        // 农场选择列表
        const farmyardSelect = document.createElement("select");
        farmyardSelect.className = "farmSel";
        for (let i = 0; i < yards.length; i++) {
          let option = document.createElement("option");
          option.value = yards[i].value;
          option.textContent = yards[i].label;
          farmyardSelect.appendChild(option);
        }
        farmrow.appendChild(farmyardSelect);

        // 出货计数
        const counts = document.createElement("input");
        counts.type = "number";
        counts.min = 1;
        counts.max = 5400; // 合3个sgqk
        counts.placeholder = "农怪数";
        counts.className = "farmcount";

        // 根据输入实时更新统计
        let currentnum = 0;
        let currentSel = parseInt(farmyardSelect.value);

        // 当农场被重新选择时，上限会被改变
        farmyardSelect.onchange = () => {
          let newSel = parseInt(farmyardSelect.value);
          updateSucc(0 - currentnum, currentSel); // 先以原农场容量取出计数
          updateSucc(currentnum, newSel); // 再以新农场容量存入计数
          currentSel = newSel;
        };

        counts.oninput = () => {
          let newnum = parseInt(counts.value);
          // 判断一下是否存在由于用户清空输入框产生的错误
          if (!isNaN(newnum)) {
            updateSucc(0 - currentnum, currentSel);
            updateSucc(newnum, currentSel);
            currentnum = newnum;
          } else {
            updateSucc(0 - currentnum, currentSel);
            currentnum = 0;
          }
        };
        farmrow.appendChild(counts);

        const delBtn = document.createElement("button");
        delBtn.textContent = "-";
        delBtn.className = "delebtn";
        delBtn.onclick = () => {
          updateSucc(0 - currentnum, currentSel);
          farmrow.remove();
        };
        const controls = document.createElement("div");
        controls.className = "controls";
        controls.append(delBtn);

        farmrow.appendChild(controls);
        document.querySelector("#farmlist").appendChild(farmrow);
      }

      // 更新所有子下拉选项(农场助手专用)
      function updateAllFarm() {
        //console.log("updatedAll");
        var allSub = document.querySelectorAll("#farmlist div select");
        for (let i = 0; i < allSub.length; i++) {
          // 过滤农场选择框，只保留服务器选择框
          if (allSub[i].className == "worldSelFarm") {
            updateSubSelectFarm(allSub[i]);
          }
        }
      }

      // 更新单个子下拉选项（农场助手专用）
      function updateSubSelectFarm(SelectWorld) {
        //console.log("updateRow");
        const dc = document.getElementById("datacenterfarm");
        const category = dc.value;
        SelectWorld.innerHTML = "";
        if (category) {
          data[category].forEach((item) => {
            const option = new Option(item, item);
            SelectWorld.add(option);
          });
        } else {
          const option = new Option("请先选择所在大区", "");
          option.disabled = true;
          SelectWorld.add(option);
        }
      }
    </script>

    <style type="text/css">
      body * {
        font-family: "Consolas", "Microsoft Yahei", Arial, sans-serif;
      }

      body {
        background: white;
        margin: 0;
        padding: 0;
      }

      .nameinput {
        outline-style: none;
        border: 1px solid #555;
        border-top: 0px;
        border-left: 0px;
        border-right: 0px;
        padding: 1px;
        width: 110px;
        font-size: 13px;
        color: #555;
        font-family: "Consolas", "Microsoft Yahei", Arial, sans-serif;
        text-align: center;
        font-weight: bold;
        background: #f3f3f3;
      }

      .nameinput::placeholder {
        color: #969696;
        font-size: 13px;
        font-family: "Consolas", "Microsoft Yahei", Arial, sans-serif;
        font-weight: bold;
      }

      .nameinput:focus {
        border: 2px solid #555;
        border-top: 0px;
        border-left: 0px;
        border-right: 0px;
      }

      .container {
        width: 500px;
        float: left;
      }

      .container > .title {
        color: #bbb;
        font-weight: bold;
        margin-bottom: 10px;
        background: #555;
        padding: 5px 15px;
      }

      .adlink {
        text-align: center;
        font-size: 11pt;
      }

      .adlink a {
        text-decoration: none;
        display: block;
        color: #666;
        font-weight: bold;
        margin-bottom: 10px;
        background: #eee;
        border: 1px solid #ddd;
        border-radius: 4px;
        padding: 10pt;
        margin-top: 10pt;
      }

      .date {
        font-size: 16pt;
        font-weight: bold;
        line-height: 32pt;
        text-align: center;
      }

      .someday .date {
        font-size: 15pt;
        font-weight: bold;
        line-height: 22pt;
        text-align: center;
      }

      .split,
      .clear {
        clear: both;
        height: 5px;
        overflow-y: hidden;
      }

      .blank {
        clear: both;
        height: 30px;
        overflow-y: hidden;
      }

      .good,
      .bad {
        clear: both;
        position: relative;
      }

      .bad {
        /*top: -1px;*/
      }

      .good .title,
      .bad .title {
        float: left;
        width: 100px;
        font-weight: bold;
        text-align: center;
        font-size: 30pt;
        position: absolute;
        top: 0;
        bottom: 0;
      }

      .good .title > table,
      .bad .title > table {
        position: absolute;
        width: 100%;
        height: 100%;
        border: none;
      }

      .good .title {
        background: #ffee44;
        border-radius: 10px 0px 0px 0px;
      }

      .someday .good .title {
        background: #aaaaaa;
        border-radius: 10px 0px 0px 0px;
      }

      .bad .title {
        background: #ff4444;
        color: #fff;
        border-radius: 0px 0px 0px 10px;
      }

      .someday .bad .title {
        background: #666666;
        color: #fff;
        border-radius: 0px 0px 0px 10px;
      }

      .good .content {
        margin-left: 115px;
        padding-right: 10px;
        padding-top: 12px;
        padding-bottom: 8px;
        font-size: 15pt;
      }

      .bad .content {
        margin-left: 115px;
        padding-right: 10px;
        padding-top: 12px;
        padding-bottom: 8px;
        font-size: 15pt;
      }

      .someday .good {
        background: #dddddd;
      }

      .someday .bad {
        background: #aaaaaa;
      }

      .good {
        background: #ffffaa;
        border-radius: 10px 10px 0px 0px;
      }

      .bad {
        background: #ffddd3;
        border-radius: 0px 0px 10px 10px;
      }

      .content ul {
        list-style: none;
        margin: 10px 0 0;
        padding: 0;
      }

      .content ul li {
        line-height: 150%;
        font-size: 15pt;
        font-weight: bold;
        color: #444;
      }

      .content ul li div.description {
        font-size: 11pt;
        font-weight: normal;
        color: #777;
        line-height: 110%;
        margin-bottom: 10px;
      }

      .line-tip {
        font-size: 11pt;
        margin-top: 10px;
        margin-left: 10px;
      }

      .line-description {
        font-size: 9pt;
        margin-top: 7px;
        margin-left: 10px;
      }

      .direction_value {
        color: #4a4;
        font-weight: bold;
      }

      .bbq_value {
        font-weight: bold;
      }

      .drink_value {
        font-weight: bold;
      }

      .title_value {
        font-weight: bold;
      }

      .someday .direction_value {
        color: #888;
      }

      .goddes_value {
        color: #f87;
      }

      .someday .goddes_value {
        color: #777;
      }

      .comment {
        margin-top: 50px;
        font-size: 11pt;
        margin-left: 10px;
      }

      .comment ul {
        margin-left: 0;
        padding-left: 20px;
        color: #999;
      }

      .usernamebox {
        font-size: 11pt;
        text-align: center;
        line-height: 20px;
        font-weight: Bold;
        color: #555;
        font-family: "Consolas", "Microsoft Yahei", Arial, sans-serif;
      }

      .titlebox {
        border: 3px solid #353535;
        background: #f3f3f3;
        /*box-shadow: 0px 0px 15px 0px rgba(128, 128, 128, 0.1);*/
        border-radius: 0px 10px 10px 0px;
        border-bottom: 0px;
        border-right: 0px;
        border-top: 0px;
        padding-top: 15px;
        padding-bottom: 20px;
        margin-bottom: 5px;
      }

      .toolcol {
        width: 420px;
        float: left;
        padding-left: 80px;
      }

      .senmurvTimer {
        width: 420px;
      }

      .senmurvTimer > .title {
        color: #bbb;
        font-weight: bold;
        background: #555;
        padding: 5px 15px;
      }

      .addbutton {
        background: #f3f3f3;
        height: 50px;
        font-size: 11px;
        line-height: 50px;
        color: #555;
        text-align: center;
        border-radius: 10px;
        width: 420px;
        border: 0px;
        margin-top: 5px;
      }
      .addbutton:hover {
        background: #555;
        color: #f3f3f3;
      }

      .row {
        width: 420px;
        height: 60px;
        background: #ffffff;
        border: 2px solid #555;
        border-radius: 10px;
        display: flex;
        align-items: center;
        gap: 10px;
        margin-bottom: 5px;
      }

      .controls {
        margin-left: auto;
      }

      .timer {
        color: #353535;
        font-size: 9pt;
        margin-left: 35px;
      }

      .counter {
        width: 30px;
        font-weight: bold;
        font-size: 15pt;
        border-radius: 10px;
        height: 30px;
        border-radius: 4px;
        text-align: center;
        line-height: 30px;
        margin-left: 15px;
      }

      .counter {
        background: #353535;
        color: #fff;
      }

      .dcSel {
        width: 420px;
        height: 35px;
        border: 1px solid #353535;
        border-radius: 4px;
        margin-bottom: 8px;
        padding-left: 10px;
      }

      .worldSel {
        width: 80px;
        height: 30px;
        border: 1px solid #353535;
        border-radius: 4px;
      }

      .hidden {
        display: none;
      }

      .time-input-group {
        display: flex;
        gap: 5px;
        align-items: center;
      }

      .time-input {
        width: 40px;
        height: 23px;
        text-align: center;
      }

      .time-label::after {
        content: "秒";
        margin-left: -10px;
        position: relative;
        z-index: 1;
      }

      .eggtime {
        width: 80px;
        font-size: 9pt;
        color: #353535;
        padding-right: -30px;
      }

      .recbtn {
        width: 60px;
        height: 30px;
        background: #353535;
        border: 0px;
        color: #ffffff;
        border-radius: 4px;
        font-weight: bold;
        text-align: center;
        margin-left: 5px;
      }

      .recbtn:hover {
        background: #ffffff;
        border: 2px solid #353535;
        color: #353535;
      }

      .yesbtn {
        width: 40px;
        height: 30px;
        background: #44a559;
        border: 0px;
        color: #ffffff;
        border-radius: 4px;
        font-weight: bold;
        text-align: center;
        margin-left: 2px;
      }

      .yesbtn:hover {
        background: #ddd;
        color: #353535;
      }

      .nobtn {
        width: 40px;
        height: 30px;
        background: #bb3333;
        border: 0px;
        color: #ffffff;
        border-radius: 4px;
        font-weight: bold;
        text-align: center;
        margin-left: 2px;
      }

      .nobtn:hover {
        background: #ddd;
        color: #353535;
      }

      .delebtn {
        background: #bb3333;
        color: #ffffff;
      }

      .delebtn {
        width: 24px;
        height: 24px;
        font-weight: bold;
        font-size: 11pt;
        border: 0px;
        border-radius: 24px;
        line-height: 24px;
        margin-left: 10px;
        margin-right: 15px;
      }

      .delebtn:hover {
        background: #b2b2b2;
        color: #e7e7e7;
      }

      .commenttools {
        margin-top: 20px;
        font-size: 9pt;
        margin-left: 4px;
      }

      .commenttools ul {
        margin-left: 0;
        padding-left: 20px;
        padding-right: 12px;
        color: #999;
      }

      .farmCalc {
        width: 420px;
        margin-top: 50px;
      }

      .farmCalc > .title {
        color: #bbb;
        font-weight: bold;
        background: #555;
        padding: 5px 15px;
      }

      .farmRow {
        width: 420px;
        height: 60px;
        background: #f3f3f3;
        border: 0px;
        border-radius: 10px;
        display: flex;
        align-items: center;
        gap: 10px;
        margin-bottom: 5px;
      }

      .farmbuttonBad {
        background: #f3f3f3;
        height: 50px;
        font-size: 11px;
        line-height: 50px;
        color: #555;
        text-align: center;
        border-radius: 10px;
        width: 205px;
        border: 0px;
        float: left;
      }

      .farmbuttonBad:hover {
        background: #bb3333;
        color: #eee;
      }

      .farmbuttonGood {
        background: #f3f3f3;
        height: 50px;
        font-size: 11px;
        line-height: 50px;
        color: #555;
        text-align: center;
        border-radius: 10px;
        width: 205px;
        border: 0px;
        margin-left: 10px;
      }

      .farmbuttonGood:hover {
        background: #44a559;
        color: #f3f3f3;
      }

      .worldSelFarm {
        width: 80px;
        height: 30px;
        color: #353535;
        background: #f3f3f3;
        border: 1px solid #353535;
        border-radius: 4px;
      }

      .farmSel {
        width: 100px;
        height: 30px;
        color: #353535;
        background: #f3f3f3;
        border: 1px solid #353535;
        border-radius: 4px;
        text-align: center;
      }

      .failed {
        width: 45px;
        font-weight: bold;
        font-size: 15pt;
        height: 60px;
        border-radius: 10px 0px 0px 10px;
        text-align: center;
        line-height: 61px;
        padding-left: 1px;
        margin-right: 5px;
      }

      .failed {
        background: #bb3333;
        color: #fff;
      }

      .succeed {
        width: 45px;
        font-weight: bold;
        font-size: 15pt;
        height: 60px;
        border-radius: 10px 0px 0px 10px;
        text-align: center;
        line-height: 61px;
        padding-left: 1px;
        margin-right: 5px;
      }

      .succeed {
        background: #44a559;
        color: #fff;
      }

      .farmcount {
        width: 70px;
        height: 26px;
        text-align: center;
        border: 1px solid #353535;
        border-radius: 4px;
        background: #f3f3f3;
        color: #353535;
        font-size: 12pt;
      }

      .farmcount::placeholder {
        font-size: 10pt;
      }

      .farmRes {
        width: 420px;
        border: 2px solid #353535;
        border-left: 0px;
        border-right: 0px;
        border-bottom: 0px;
        border-radius: 0px 0px 10px 10px;
        background: #ffffff;
        margin-top: 10px;
        margin-bottom: -5px;
      }

      .farmRes ul {
        color: #666;
        margin-left: -35px;
        margin-top: -2px;
      }

      .succnum {
        font-weight: bold;
        font-size: 15pt;
        color: #44a559;
      }

      .failnum {
        font-weight: bold;
        font-size: 15pt;
        color: #bb3333;
      }

      .restext {
        margin-top: 15px;
        font-size: 8pt;
        text-align: center;
      }

      .restext2 {
        font-size: 8pt;
        padding-bottom: 15px;
        text-align: center;
      }
    </style>
  </head>
  <body>
    <div id="main" style="width: 1000px; margin: 0 auto 50px">
      <div class="container">
        <div class="title">散触老黄历<sup>Ver2.22</sup></div>
        <div class="line-description">据说这是怪物猎人间代代相传的老黄历，</div>
        <div class="line-description">出发触S之前确定不看看么？</div>
        <div class="blank"></div>
        <div class="titlebox">
          <div class="date"></div>
          <div class="usernamebox">
            老黄历给
            <input
              type="text"
              class="nameinput"
              name="username"
              id="yourname"
              placeholder="你的名字"
              size="8"
              maxlength="24"
              oninput="generateNew()"
            />
            的建议:
          </div>
        </div>
        <div class="split"></div>
        <div class="good">
          <div class="title">
            <table>
              <tr>
                <td>宜</td>
              </tr>
            </table>
          </div>
          <div class="content">
            <ul></ul>
          </div>
          <div class="clear"></div>
        </div>
        <div class="split"></div>
        <div class="bad">
          <div class="title">
            <table>
              <tr>
                <td>忌</td>
              </tr>
            </table>
          </div>
          <div class="content">
            <ul></ul>
          </div>
          <div class="clear"></div>
        </div>
        <div class="split"></div>
        <div class="line-tip">
          <strong>今日运势：</strong><span class="goddes_value"></span>
        </div>
        <div class="line-tip">
          <strong>座位朝向：</strong>面向<span class="direction_value"></span
          >触S，最容易出货。
        </div>
        <div class="line-tip">
          <strong>烤肉摊位：</strong>在<span class="bbq_value"></span
          >搓犎牛牛排HQ，阿提卡斯最爱吃。
        </div>
        <div class="line-tip">
          <strong>推荐职业：</strong>使用<span class="drink_value"></span
          >农怪，效率最高。
        </div>
        <div class="line-tip">
          <strong>幸运称号：</strong>佩戴称号<<span class="title_value"></span
          >>触发，最容易吸引S怪。
        </div>

        <div class="comment">
          <ul>
            <li>此页面魔改自程序员老黄历，非100%原创</li>
            <li>老黄历为玄学产物，仅供参考，切勿过度迷信</li>
            <li>请理性游戏，不要让狩猎毁了你的工作/学业</li>
            <li>
              Bug反馈和建议请联系上谷崎栞@宇宙和音 |&nbsp;<a
                href="https://github.com/cnsuslik/cnsuslik.github.io/blob/main/README.md"
                >项目库&更新记录</a
              >
            </li>
          </ul>
        </div>
      </div>
      <audio id="alarmSound" src="SFX.wav" preload="auto"></audio>
      <audio src="silent.mp3" autoplay loop></audio>
      <div class="toolcol">
        <!-- 龙蛋计时器 -->
        <div class="senmurvTimer">
          <div class="title">小工具：龙蛋计时器</div>
          <div class="line-description">蹲龙蛋怕记不清次数？</div>
          <div class="line-description">试试龙蛋计数器吧！</div>
          <div class="blank"></div>
          <!-- 用户先选择大区 -->
          <select id="datacenter" class="dcSel" onchange="updateAllSub()">
            <option value="">请先选择大区，再添加服务器</option>
            <option value="niaoye">陆行鸟</option>
            <option value="maoye">猫小胖</option>
            <option value="zhuye">莫古力</option>
            <option value="gouye">豆豆柴</option>
          </select>
          <!-- 动态表单 -->
          <div id="egglist"></div>
          <!-- 添加按钮 -->
          <button id="adder" class="addbutton" onclick="addRow()">
            点击添加服务器
          </button>
          <div class="commenttools">
            <ul>
              <li>点击[龙蛋]按钮，可自动增加计数并记录时间；</li>
              <li>点击[铁王八]按钮，输入剩余Ft并确定，可自动倒计时；</li>
              <li>已完成触发的服务器，可点击最右侧“-”号删除。</li>
              <li>
                受Chrome等浏览器的省电策略影响，铁王八计时器可能出现倒计时不准确或暂停工作的情况。<strong>点击倒计时文本可直接中断计时器</strong>。
              </li>
              <li>
                本页面已采取有限手段来避免后台休眠，但作者强烈建议<strong>保持本页面活跃（如置顶本页面窗口、定时与本页面交互等）</strong>以确保计时器正常工作。
              </li>
            </ul>
          </div>
        </div>
        <!-- 农怪统寄 -->
        <div class="farmCalc">
          <div class="title">小工具：农场统寄助手</div>
          <div class="line-description">如果你想知道今天寄了多少</div>
          <div class="line-description">农场统寄小助手可以帮到你！</div>
          <div class="blank"></div>
          <!-- 用户先选择大区 -->
          <select id="datacenterfarm" class="dcSel" onchange="updateAllFarm()">
            <option value="">请先选择大区，再添加服务器</option>
            <option value="niaoye">陆行鸟</option>
            <option value="maoye">猫小胖</option>
            <option value="zhuye">莫古力</option>
            <option value="gouye">豆豆柴</option>
          </select>
          <!-- 动态表单 -->
          <div id="farmlist"></div>
          <div id="farmresult" class="farmRes"><ul id="res"></ul></div>
          <button
            id="farmadderBad"
            class="farmbuttonBad"
            onclick="addFarmBad()"
          >
            点击添加农怪寄录
          </button>
          <button
            id="farmadderGood"
            class="farmbuttonGood"
            onclick="addFarmGood()"
          >
            点击添加出货记录
          </button>
          <div class="commenttools">
            <ul>
              <li>添加失败寄录和出货记录，农场统寄助手会自动汇总全部数据；</li>
              <li>添加出货记录时，需输入实际农怪数字，最大5400(合3个sgqk)；</li>
              <li>反复寄多次的农场，需添加多条该农场的失败寄录；</li>
              <li>
                农多次才出的农场，建议直接添加出货记录并输入总农数，以更准确地计算遗产（若此前已添加该农场的寄录，此时需将它们删除）
              </li>
              <li>大区和服务器选择仅用作记录，不影响最终结果汇总。</li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
